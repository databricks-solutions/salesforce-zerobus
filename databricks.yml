# This bundle builds the salesforce-zerobus whl and creates a job to run the service. You can use the serverless model here or uncomment the job cluster options to use a job cluster.

bundle:
  name: salesforce-zerobus

artifacts:
  default:
    type: whl
    build: uv build --wheel
    path: .

variables:
  salesforce_objects:
    description: List of Salesforce objects to ingest
    default: not_specified
  ldp_catalog:
    description: List of Salesforce objects to ingest
    default: not_specified
  ldp_schema:
    description: List of Salesforce objects to ingest
    default: not_specified

includes:
  - resources/*.yml


targets:
  dev:
    default: true
    mode: development
    # workspace:
    #   root_path: /Workspace/Users//.bundle/${bundle.name}/${bundle.target}
    variables:
      salesforce_objects: '["AccountChangeEvent", "LeadChangeEvent", "OpportunityChangeEvent", "ContactChangeEvent"]'
      ldp_catalog: 'your_catalog_here'
      ldp_schema: 'your_schema_here'

#TODO: extend the salesforce_object variables to the LDP to loop through the tables and create a table for each object